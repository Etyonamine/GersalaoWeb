<mat-card>

    <mat-card-title>
        <h2>Cliente- Agenda - Estorno do pagamento</h2>
    </mat-card-title>


    <mat-card-content class="mat-typography">
        <div class="container">
            <form [formGroup]="formulario" (ngSubmit)="onSubmit()">
                <mat-form-field *ngIf="listaPagamentos" appearance="fill" class="comboForma">
                    <mat-label>Selecione uma pagamento da lista</mat-label>
                    <mat-select matTooltip="pagamentos" 
                                formControlName="codigoPagamento" 
                                (selectionChange)="preencherValorEstorno()"
                                required                                
                    >
                        <mat-option *ngFor="let option of listaPagamentos" [value]="option.codigo">
                            {{ 'Pagamento = ' + (option.dataCadastro | date: 'dd/MM/yyyy HH:mm:ss') + '  / Valor = ' + (option.valorPagamento | currency:'BRL':'symbol':'1.2-2':'pt') }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>           
                <mat-form-field *ngIf="listaMotivoEstornos" appearance="fill" class="comboForma">
                    <mat-label>Selecione um motivo para o estorno</mat-label>
                    <mat-select matTooltip="motivo do estorno" formControlName="codigoMotivoEstorno" required>
                        <mat-option *ngFor="let option of listaMotivoEstornos" [value]="option.codigo">
                            {{ option.descricao }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>   
                  <!--valor a estornar-->                  
                  <mat-form-field appearance="fill" class="campoValor">
                    <mat-label>Valor</mat-label>
                    <input matInput
                    class="alinharADireita"
                    formControlName="valorEstornar"                  
                    autocomplete="off"
                    placeholder="Valor do serviço selecionado"
                    placeholder="0.000,00"                           
                    required>
                </mat-form-field>
                 <!--descrição do motivo de estorno-->
                 <mat-form-field appearance="fill" class="campoObservacao">
                    <mat-label>Descrição do motivo do estorno</mat-label>
                    <textarea matInput #message maxlength="300"
                        placeholder="Por favor, informe o motivo do estorno" cdkTextareaAutosize
                        formControlName="observacaoDoEstorno"></textarea>
                    <mat-hint align="start"><strong>Por favor, digite apenas a quantidade permitida.</strong>
                    </mat-hint>
                    <mat-hint align="end">{{message.value.length}} / 300</mat-hint>
                </mat-form-field>                
            </form>
        </div>
    </mat-card-content>
    <mat-divider></mat-divider>

    <mat-card-actions align="end">
        <button mat-raised-button class="botaoConfirmar" [disabled]="!this.formulario.valid"
            (click)="submit()">Confirmar</button>
        <button mat-raised-button color="primary" mat-dialog-close cdkFocusInitial>Retornar</button>

    </mat-card-actions>
</mat-card>