<div class="container">
    <mat-card>
        <mat-card-header>
            <mat-card-title>Consulta de agendamento(s)</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="container">
                <!--subtitulo filtros -->
                <mat-card-subtitle>Filtros - Pesquisa</mat-card-subtitle>
                <mat-divider></mat-divider>                
                <!--periodo-->
                <mat-form-field appearance="fill">
                    <mat-label>Selecione um per&iacute;odo</mat-label>
                    <mat-date-range-input [formGroup]="range" [rangePicker]="picker" >
                      <input matStartDate formControlName="start" placeholder="Start date">
                      <input matEndDate formControlName="end" placeholder="End date">
                    </mat-date-range-input>
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-date-range-picker #picker>
                        <mat-date-range-picker-actions>
                            <button mat-button matDateRangePickerCancel>Cancelar</button>
                            <button mat-raised-button color="primary" matDateRangePickerApply (click)="alteracaoPeriodo()">Aplicar</button>
                          </mat-date-range-picker-actions>
                    </mat-date-range-picker>
                  
                    <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')">Invalid start date</mat-error>
                    <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')">Invalid end date</mat-error>
                </mat-form-field>
                <!--Cliente-->
                <mat-form-field appearance="fill" class="nomeCliente">
                    <mat-label>Cliente</mat-label>
                    <mat-select [(ngModel)]="codigoCliente" name="cliente">
                        <mat-option *ngFor="let cliente of listaClientes" [value]="cliente.codigo">
                            {{cliente.nome}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>             
                <!--Profissional-->
                <mat-form-field appearance="fill" class="nomeCliente">
                    <mat-label>Profissional</mat-label>
                    <mat-select [(ngModel)]="codigoProfissional" name="profissional">
                        <mat-option *ngFor="let profissional of listaProfissionais" [value]="profissional.codigo">
                            {{profissional.nome}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>    
                <!--Profissional-->
                <mat-form-field appearance="fill" class="nomeCliente">
                    <mat-label>Servi&ccedil;o</mat-label>
                    <mat-select [(ngModel)]="codigoServico" name="servico">
                        <mat-option *ngFor="let servico of listaServicos" [value]="servico.codigo">
                            {{servico.descricao}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>  
                  <!--Botão Limpar filtros -->
                <button mat-raised-button color="primary"(click)="limparFiltros()">Limpar</button>
                  <!--Botão pesquisar-->
                  <button mat-raised-button color="primary" (click)="pesquisarAgendas()">Pesquisar</button>
            </div>
        </mat-card-content>
        <mat-card-content>
            <mat-divider></mat-divider>       
            <div class="container">
                <mat-card-subtitle>Lista - Agendas</mat-card-subtitle>
                <mat-divider></mat-divider>       
            </div>
            <div>
                <table mat-table [dataSource]="listaAgendaServicos"   
                     matSort  (matSortChange)="ordenarDados($event)" 
                     matSortActive="inicio" 
                     matSortDirection="asc"
                     [hidden]="!listaAgendaServicos"                    
                >
                    <ng-container matColumnDef="nomeCliente">
                        <mat-header-cell *matHeaderCellDef mat-sort-header="nomeCliente" >Cliente</mat-header-cell>
                        <mat-cell *matCellDef="let info"> {{ info.agenda.cliente.nome }} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="nomeProfissional">
                        <mat-header-cell *matHeaderCellDef mat-sort-header="nomeProfissional">Profissional</mat-header-cell>
                        <mat-cell *matCellDef="let info"> {{ info.profissional.nome }} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="inicio">
                        <mat-header-cell *matHeaderCellDef mat-sort-header="inicio">In&iacute;cio</mat-header-cell>
                        <mat-cell *matCellDef="let info"> {{ info.agenda.dataInicio | date: 'dd/MM/yyyy HH:mm:ss'}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="fim">
                        <mat-header-cell *matHeaderCellDef mat-sort-header="fim">Fim</mat-header-cell>
                        <mat-cell *matCellDef="let info"> {{ info.agenda.dataFim | date: 'dd/MM/yyyy HH:mm:ss'}} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="servico">
                        <mat-header-cell *matHeaderCellDef mat-sort-header="servico">Servi&ccedil;o</mat-header-cell>
                        <mat-cell *matCellDef="let info"> {{ info.servico.descricao }} </mat-cell>
                    </ng-container>                   
                    <mat-header-row *matHeaderRowDef="colunas"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: colunas"></mat-row>
                </table>
                <!-- <table [class.mat-elevation-z8]="true" [hidden]="!listaAgendaServicos">
                    <thead>
                        <tr>
                          <th>Cliente</th>
                          <th>Profissional</th>
                          <th>Inicio</th>
                          <th>Fim</th>
                          <th>Servi&ccedil;o</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let agenda of listaAgendaServicos">
                          <td>
                            {{ agenda.agenda.cliente.nome}}
                          </td>
                          <td>
                            {{ agenda.profissional.nome}}
                          </td>
                          <td>
                            {{ agenda.agenda.dataInicio | date: 'dd/MM/yyyy HH:mm:ss'}}
                          </td>
                          <td>
                            {{ agenda.agenda.dataFim | date: 'dd/MM/yyyy HH:mm:ss'}}
                          </td>
                          <td>
                            {{ agenda.servico.descricao}}
                          </td>
                        </tr>
                    </tbody>
                </table> -->
            </div>
        </mat-card-content>
    </mat-card>
</div>